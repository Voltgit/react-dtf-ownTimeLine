{"version":3,"sources":["js/detectScroll.js","post/PostContent.js","post/PostHeader.js","post/PostBlock.js","requests/serverRequest.js","App.js","index.js"],"names":["detectScroll","Promise","resolve","window","addEventListener","e","vh","Math","max","document","documentElement","clientHeight","innerHeight","documentHeight","getElementById","getClientRects","height","scrollY","PostContent","props","classes","post","contentHeight","cover","size","width","push","className","join","additionalData","type","style","backgroundSize","backgroundRepeat","backgroundImage","url","borderRadius","loop","muted","controls","name","src","PostHeader","subsite","avatar_url","author","likes","count","title","intro","PostBlock","getPopularPosts","urlStr","offset","URL","params","search","URLSearchParams","toString","fetch","then","response","json","result","App","useState","posts","setPosts","postCount","setPostCount","useEffect","res","console","log","length","map","i","id","ReactDOM","render","StrictMode"],"mappings":"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","file":"static/js/main.80ae12c8.chunk.js","sourcesContent":["\r\n\r\nfunction detectScroll() {\r\n\treturn new Promise((resolve) => {\r\n\t\twindow.addEventListener('scroll', (e) => {\r\n\t\t\tconst vh = Math.max(document.documentElement.clientHeight || 0, window.innerHeight || 0)\r\n\t\t\tlet documentHeight = document.getElementById(\"root\").getClientRects()[0].height - vh;\r\n\r\n\t\t\tif (window.scrollY > documentHeight * 0.8) {\r\n\t\t\t\tresolve(true);\r\n\t\t\t}\r\n\t\t})\r\n\r\n\t})\r\n\r\n}\r\n\r\nexport default detectScroll;","import React from 'react'\r\n\r\nfunction PostContent(props) {\r\n\r\n\tlet classes = [\"PostContent\"];\r\n\r\n\tlet post = props.post;\r\n\r\n\tlet contentHeight = 640 * post.cover.size.height / post.cover.size.width;\r\n\r\n\tif (contentHeight > 365) {\r\n\t\tclasses.push(\"portrait\")\r\n\t\tcontentHeight = 360;\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className={classes.join(' ')}>\r\n\t\t\t{\r\n\t\t\t\tpost.cover.additionalData.type !== 'gif' ?\r\n\t\t\t\t\t<div style={\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\twidth: \"640px\",\r\n\t\t\t\t\t\t\theight: `${contentHeight}px`,\r\n\t\t\t\t\t\t\tbackgroundSize: \"contain\",\r\n\t\t\t\t\t\t\tbackgroundRepeat: \"no-repeat\",\r\n\t\t\t\t\t\t\tbackgroundImage: `url(${post.cover.url})`,\r\n\t\t\t\t\t\t\tborderRadius: '0px 0px 8px 8px'\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} />\r\n\t\t\t\t\t:\r\n\t\t\t\t\t<div style={\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\twidth: \"640px\",\r\n\t\t\t\t\t\t\theight: \"360px\",\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} >\r\n\r\n\t\t\t\t\t\t<video loop muted controls name='media' style={{ width: '100%', height: '100%' }}>\r\n\t\t\t\t\t\t\t<source src={post.cover.url} type='video/mp4' />\r\n\t\t\t\t\t\t</video>\r\n\r\n\t\t\t\t\t</div>\r\n\t\t\t}\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default PostContent;","import React from 'react'\r\n\r\nfunction PostHeader(props) {\r\n\tlet post = props.post;\r\n\treturn (\r\n\t\t<div className=\"PostHeader\">\r\n\t\t\t<div className=\"PostInfo\">\r\n\t\t\t\t<div className=\"PostInfo__subsite-logo\" style={{ backgroundImage: `url(${post.subsite.avatar_url})` }} />\r\n\t\t\t\t<span className=\"PostInfo__subsite\">{post.subsite.name}</span>\r\n\t\t\t\t<span className=\"PostInfo__author\">{post.author.name}</span>\r\n\t\t\t\t<span className=\"PostInfo__date\">{\"50 sek\"/*post.dateRFC*/}</span>\r\n\t\t\t\t<span className=\"PostInfo__rating\">{post.likes.count}</span>\r\n\t\t\t</div>\r\n\t\t\t<div className=\"PostHeader__title\">{post.title}</div>\r\n\t\t\t<div className=\"PostHeader__discription\">{post.intro}</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default PostHeader;","import React from 'react'\r\nimport PostContent from './PostContent';\r\nimport PostHeader from './PostHeader';\r\n\r\nfunction PostBlock(props) {\r\n\tlet post = props.post;\r\n\treturn (\r\n\t\t<div className=\"PostBlock\">\r\n\r\n\t\t\t<PostHeader post={post} />\r\n\r\n\t\t\t<PostContent post={post} />\r\n\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default PostBlock;","\r\n//\"https://dtf.ru/kek/897475-hold-my-beer\"                                           ---video\r\n//https://dtf.ru/flood/897547-chernyy-vlastelin-prinyal-svoyu-okonchatelnuyu-formu   ---ps5\r\n\r\nfunction getPopularPosts(urlStr, count = 1, offset = 0) {\r\n\tlet url = new URL(urlStr);\r\n\tlet params = { count: count, offset: offset }\r\n\r\n\turl.search = new URLSearchParams(params).toString();\r\n\r\n\treturn fetch(url)\r\n\t\t.then(response => response.json())\r\n\t\t.then(result => result.result)\r\n}\r\n\r\nfunction getPost(urlStr) {\r\n\tlet url = new URL(\"https://api.dtf.ru/v1.8/entry/locate\")\r\n\tlet params = { url: urlStr }\r\n\r\n\turl.search = new URLSearchParams(params).toString()\r\n\r\n\treturn fetch(url)\r\n\t\t.then(response => response.json())\r\n\t\t.then(result => result.result)\r\n}\r\n\r\nexport default getPopularPosts;\r\nexport { getPost };","import React, { useEffect, useState } from 'react';\nimport './App.css';\nimport detectScroll from './js/detectScroll';\nimport PostBlock from './post/PostBlock';\nimport getPopularPosts, { getPost } from './requests/serverRequest';\n\nconst n = 3;\n\nfunction App() {\n\n\tlet [posts, setPosts] = useState([1, 2, 3])\n\tlet [postCount, setPostCount] = useState(n)\n\n\tuseEffect(() => {\n\t\tgetPopularPosts(\"https://api.dtf.ru/v1.8/timeline/mainpage/popular\", postCount)\n\t\t\t.then(res => setPosts(res))\n\t\t//console.log(posts[0])\n\t\t/*getPost(\"https://dtf.ru/games/897092-dushnyy-new-world\")\n\t\t\t.then(res => setPosts([res]))*/\n\t\tdetectScroll().then(res => {\n\t\t\tgetPopularPosts(\"https://api.dtf.ru/v1.8/timeline/mainpage/popular\", postCount)\n\t\t\t\t.then(res => {\n\t\t\t\t\tsetPosts(res)\n\t\t\t\t\tconsole.log(12313)\n\t\t\t\t\tsetPostCount(postCount + n)\n\t\t\t\t})\n\t\t})\n\t}, [postCount])\n\treturn (\n\t\t<div className=\"App\">\n\t\t\t<header className=\"App-header\">\n\t\t\t\t<h1>DTF Popular {posts.length}</h1>\n\t\t\t</header>\n\t\t\t<div className=\"container\">\n\t\t\t\t{posts.map((post, i) => {\n\t\t\t\t\tconsole.log(post.id + \"  /  \" + post.title)\n\t\t\t\t\tif (!post.cover) return false;\n\t\t\t\t\treturn (\n\t\t\t\t\t\t/*<div key={i}>{post.title}</div>*/\n\t\t\t\t\t\t<PostBlock post={post} key={post.id} />\n\t\t\t\t\t)\n\t\t\t\t})}\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n\t<React.StrictMode>\n\t\t<App />\n\t</React.StrictMode>,\n\tdocument.getElementById('root')\n);"],"sourceRoot":""}